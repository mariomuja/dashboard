services:
  - type: web
    name: kpi-dashboard-backend
    env: node
    plan: free
    rootDirectory: dashboard-backend
    buildCommand: npm install
    startCommand: node server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: CORS_ORIGIN
        value: https://dashboard-mario-muja.vercel.app,https://dashboard-git-main-mario-muja.vercel.app
      - key: ENABLE_KPI_INTEGRATION
        value: true
    # Temporarily comment out database to use in-memory mode
    # Uncomment when database is deployed
    #   - key: DATABASE_URL
    #     fromDatabase:
    #       name: kpi-dashboard-db
    #       property: connectionString

# Temporarily comment out database deployment
# Uncomment when ready to use persistent storage
# databases:
#   - name: kpi-dashboard-db
#     plan: free
#     databaseName: kpi_dashboard
