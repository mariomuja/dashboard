<div class="tenant-container">
  <!-- Header -->
  <header class="tenant-header">
    <div class="header-content">
      <div class="header-title">
        <h1>ğŸ¢ Tenant Management</h1>
        <p>Multi-tenancy and organization control</p>
      </div>
      <div class="header-actions">
        <button class="mat-btn mat-btn-filled" (click)="openNewTenantModal()">
          â• New Tenant
        </button>
        <button class="mat-btn mat-btn-outlined" (click)="goBack()">
          â† Back to Admin
        </button>
      </div>
    </div>
  </header>

  <!-- Tenants List -->
  <div class="tenants-section">
    <h2>Tenants ({{ tenants.length }})</h2>

    <div class="empty-state" *ngIf="tenants.length === 0">
      <div class="empty-icon">ğŸ¢</div>
      <h3>No Tenants Yet</h3>
      <p>Create your first tenant to get started with multi-tenancy</p>
    </div>

    <div class="tenants-grid">
      <div 
        *ngFor="let tenant of tenants" 
        class="tenant-card"
        [class.selected]="selectedTenant?.id === tenant.id"
        (click)="selectTenant(tenant)">
        
        <!-- Tenant Header -->
        <div class="tenant-header-card">
          <div class="tenant-info">
            <h3>{{ tenant.name }}</h3>
            <p class="tenant-domain">ğŸŒ {{ tenant.domain }}</p>
          </div>
          <div class="tenant-status" [style.color]="getStatusColor(tenant.status)">
            <span class="status-icon">{{ getStatusIcon(tenant.status) }}</span>
            <span>{{ tenant.status }}</span>
          </div>
        </div>

        <!-- Tenant Details -->
        <div class="tenant-details">
          <div class="detail-row">
            <span class="detail-label">Max Users:</span>
            <span class="detail-value">{{ tenant.settings?.maxUsers || 'Unlimited' }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Storage:</span>
            <span class="detail-value">{{ tenant.settings?.maxStorage || 0 }} GB</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Features:</span>
            <span class="detail-value">{{ tenant.settings?.allowedFeatures?.length || 0 }} enabled</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Created:</span>
            <span class="detail-value">{{ formatDate(tenant.createdAt) }}</span>
          </div>
        </div>

        <!-- Tenant Actions -->
        <div class="tenant-actions">
          <button 
            class="action-btn edit-btn"
            (click)="openEditModal(tenant); $event.stopPropagation()">
            âœï¸ Edit
          </button>
          <button 
            *ngIf="tenant.status === 'active'"
            class="action-btn suspend-btn"
            (click)="suspendTenant(tenant); $event.stopPropagation()">
            â¸ï¸ Suspend
          </button>
          <button 
            *ngIf="tenant.status === 'suspended'"
            class="action-btn activate-btn"
            (click)="activateTenant(tenant); $event.stopPropagation()">
            â–¶ï¸ Activate
          </button>
          <button 
            class="action-btn delete-btn"
            (click)="deleteTenant(tenant); $event.stopPropagation()">
            ğŸ—‘ï¸ Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal-overlay" *ngIf="showEditModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ isNewTenant ? 'â• New Tenant' : 'âœï¸ Edit Tenant' }}</h2>
        <button class="close-btn" (click)="closeModal()">âœ•</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Tenant Name *</label>
          <input 
            type="text" 
            [(ngModel)]="editingTenant.name" 
            class="input-field"
            placeholder="e.g., Acme Corporation">
        </div>

        <div class="form-group">
          <label>Domain *</label>
          <input 
            type="text" 
            [(ngModel)]="editingTenant.domain" 
            class="input-field"
            placeholder="e.g., acme.com">
        </div>

        <div class="form-group">
          <label>Max Users</label>
          <input 
            type="number" 
            [(ngModel)]="editingTenant.settings!.maxUsers" 
            class="input-field"
            min="1">
        </div>

        <div class="form-group">
          <label>Max Storage (GB)</label>
          <input 
            type="number" 
            [(ngModel)]="editingTenant.settings!.maxStorage" 
            class="input-field"
            min="1">
        </div>

        <div class="form-group">
          <label>Status</label>
          <select [(ngModel)]="editingTenant.status" class="input-field">
            <option value="active">Active</option>
            <option value="suspended">Suspended</option>
            <option value="trial">Trial</option>
          </select>
        </div>

        <div class="form-group">
          <label>
            <input 
              type="checkbox" 
              [(ngModel)]="editingTenant.settings!.customBranding">
            Allow Custom Branding
          </label>
        </div>
      </div>

      <div class="modal-footer">
        <button class="mat-btn mat-btn-outlined" (click)="closeModal()">
          Cancel
        </button>
        <button class="mat-btn mat-btn-filled" (click)="saveTenant()">
          {{ isNewTenant ? 'Create Tenant' : 'Save Changes' }}
        </button>
      </div>
    </div>
  </div>
</div>

